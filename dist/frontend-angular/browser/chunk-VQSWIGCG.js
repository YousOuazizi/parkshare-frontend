import{a as i}from"./chunk-ENVM6CV3.js";import{b as u}from"./chunk-BJ67WPCT.js";import{Ta as s,W as r,Z as a,da as o}from"./chunk-JQWXTQXA.js";var c=class n{api=o(u);unreadCountSignal=s(0);unreadCount=this.unreadCountSignal.asReadonly();getNotifications(){return this.api.get(i.NOTIFICATIONS.BASE)}getUnreadCount(){return this.api.get(i.NOTIFICATIONS.COUNT).pipe(r(t=>this.unreadCountSignal.set(t.count)))}getNotificationById(t){return this.api.get(i.NOTIFICATIONS.BY_ID(t))}markAsRead(t){return this.api.patch(i.NOTIFICATIONS.MARK_READ(t),{}).pipe(r(()=>{let e=this.unreadCountSignal();e>0&&this.unreadCountSignal.set(e-1)}))}markAllAsRead(){return this.api.post(i.NOTIFICATIONS.READ_ALL,{}).pipe(r(()=>this.unreadCountSignal.set(0)))}deleteNotification(t){return this.api.delete(i.NOTIFICATIONS.BY_ID(t))}refreshUnreadCount(){this.getUnreadCount().subscribe()}static \u0275fac=function(e){return new(e||n)};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})};export{c as a};
